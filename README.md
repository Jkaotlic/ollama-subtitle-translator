# üé¨ –ü–µ—Ä–µ–≤–æ–¥—á–∏–∫ —Å—É–±—Ç–∏—Ç—Ä–æ–≤ (Ollama Subtitle Translator)

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)
[![Python 3.11+](https://img.shields.io/badge/Python-3.11+-blue.svg)](https://www.python.org/)
[![Docker](https://img.shields.io/badge/Docker-ready-2496ED.svg)](docker-compose.yml)

> **Offline subtitle translator** powered by Ollama + Translating Gemma. No API keys, no cloud ‚Äî runs entirely on your machine.

–õ–æ–∫–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫ —Å—É–±—Ç–∏—Ç—Ä–æ–≤ (.srt) –Ω–∞ –±–∞–∑–µ **Ollama** + **Translating Gemma** (Google).
–†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ñ–ª–∞–π–Ω ‚Äî –±–µ–∑ API-–∫–ª—é—á–µ–π –∏ –æ–±–ª–∞—á–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Ollama

–°–∫–∞—á–∞–π—Ç–µ —Å [ollama.com/download](https://ollama.com/download) –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
ollama serve
ollama pull translategemma:4b
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
pip install -r requirements.txt
```

### 3. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ffmpeg –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—É–±—Ç–∏—Ç—Ä–æ–≤ –∏–∑ –≤–∏–¥–µ–æ

```bash
# macOS
brew install ffmpeg

# Linux
apt install ffmpeg
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ (–¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞)

#### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
python app.py
# –û—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ http://localhost:8847
```

–ù–∞ macOS:
```bash
./run_local.sh
```

–ù–∞ Windows:
```bash
run_web.bat
```

#### –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞

```bash
python translate_srt.py movie.srt                     # EN‚ÜíRU (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
python translate_srt.py movie.srt -l Japanese          # EN‚ÜíJP
python translate_srt.py movie.srt -l German -o de.srt  # EN‚ÜíDE –≤ de.srt
python translate_srt.py movie.srt -s English           # –£–∫–∞–∑–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π —è–∑—ã–∫
python translate_srt.py movie.srt --two-pass           # –î–≤—É—Ö–ø—Ä–æ—Ö–æ–¥–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥
```

---

## üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (`app.py`) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:

- **Drag & drop** –∑–∞–≥—Ä—É–∑–∫—É .srt —Ñ–∞–π–ª–æ–≤
- **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É–±—Ç–∏—Ç—Ä–æ–≤ –∏–∑ –≤–∏–¥–µ–æ** (MKV, MP4, AVI) —á–µ—Ä–µ–∑ ffmpeg
- –í—ã–±–æ—Ä **—è–∑—ã–∫–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞** –∏ **—Ü–µ–ª–µ–≤–æ–≥–æ —è–∑—ã–∫–∞** –∏–∑ 16+ —è–∑—ã–∫–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫—É **–º–æ–¥–µ–ª–∏** Ollama (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `translategemma:4b`)
- –ü–æ–ª–µ **–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** ‚Äî –ø–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: ¬´–º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —Å–µ—Ä–∏–∞–ª¬ª)
- **–î–≤—É—Ö–ø—Ä–æ—Ö–æ–¥–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥** (translate + review) –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
- **–ê–≤—Ç–æ—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π** ‚Äî –µ—Å–ª–∏ –º–æ–¥–µ–ª—å –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞, —Å–∫–∞—á–∞–µ—Ç—Å—è –ø—Ä—è–º–æ –∏–∑ UI
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ **temperature** –∏ **chunk size** –¥–ª—è —Ç–æ–Ω–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞

### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É–±—Ç–∏—Ç—Ä–æ–≤ –∏–∑ –≤–∏–¥–µ–æ

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–∏–¥–µ–æ—Ñ–∞–π–ª —Å –≤—à–∏—Ç—ã–º–∏ —Å—É–±—Ç–∏—Ç—Ä–∞–º–∏ (MKV, MP4 –∏ –¥—Ä.):

1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É **¬´–ò–∑–≤–ª–µ—á—å –∏–∑ –≤–∏–¥–µ–æ¬ª**
2. –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –Ω–∞ –¥–∏—Å–∫–µ
3. –ù–∞–∂–º–∏—Ç–µ **¬´–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å¬ª** ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∫–∞–∂–µ—Ç —Å–ø–∏—Å–æ–∫ —Å—É–±—Ç–∏—Ç—Ä–æ–≤
4. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—É—é –¥–æ—Ä–æ–∂–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, English)
5. –ù–∞–∂–º–∏—Ç–µ **¬´–ü–µ—Ä–µ–≤–µ—Å—Ç–∏¬ª** ‚Äî —Å—É–±—Ç–∏—Ç—Ä—ã –±—É–¥—É—Ç –∏–∑–≤–ª–µ—á–µ–Ω—ã –∏ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã

> –¢—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π **ffmpeg** (`brew install ffmpeg` / `apt install ffmpeg`).

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|---|---|---|
| `OLLAMA_URL` | URL Ollama API | `http://127.0.0.1:11434` |
| `PORT` | –ü–æ—Ä—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ | `8847` |
| `MAX_WORKERS` | –ú–∞–∫—Å. –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤ | `3` |
| `UPLOAD_DIR` | –ü–∞–ø–∫–∞ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ | –°–∏—Å—Ç–µ–º–Ω–∞—è temp |
| `FILE_TTL` | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ñ–∞–π–ª–æ–≤ (—Å–µ–∫) | `86400` (1 –¥–µ–Ω—å) |
| `TASK_TTL` | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∑–∞–¥–∞—á (—Å–µ–∫) | `86400` (1 –¥–µ–Ω—å) |
| `CLEANUP_INTERVAL` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ—á–∏—Å—Ç–∫–∏ (—Å–µ–∫) | `600` (10 –º–∏–Ω) |
| `SHUTDOWN_TIMEOUT` | –¢–∞–π–º–∞—É—Ç –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ (—Å–µ–∫) | `30` |
| `LOG_LEVEL` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è | `INFO` |
| `LOG_FORMAT` | –§–æ—Ä–º–∞—Ç –ª–æ–≥-—Å—Ç—Ä–æ–∫–∏ (Python logging) | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π |

---

## üõ† –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞

```bash
python translate_srt.py <—Ñ–∞–π–ª.srt> [–æ–ø—Ü–∏–∏]
```

| –§–ª–∞–≥ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|---|---|---|
| `-l`, `--lang` | –¶–µ–ª–µ–≤–æ–π —è–∑—ã–∫ | `Russian` |
| `-s`, `--source-lang` | –ò—Å—Ö–æ–¥–Ω—ã–π —è–∑—ã–∫ (–∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω) | ‚Äî |
| `-o`, `--out` | –í—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª | `<input>.<lang>.srt` |
| `-m`, `--model` | –ú–æ–¥–µ–ª—å Ollama | `translategemma:4b` |
| `-b`, `--batch` | –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ (–ø—Ä–æ–≥—Ä–µ—Å—Å) | `10` |
| `-c`, `--context` | –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ | ‚Äî |
| `--two-pass` | –î–≤—É—Ö–ø—Ä–æ—Ö–æ–¥–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ (translate + review) | –≤—ã–∫–ª. |
| `--review-model` | –ú–æ–¥–µ–ª—å –¥–ª—è review-–ø—Ä–æ—Ö–æ–¥–∞ | —Ç–∞ –∂–µ |

---

## üåç –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏

| –Ø–∑—ã–∫ | –ö–æ–¥ | | –Ø–∑—ã–∫ | –ö–æ–¥ |
|---|---|-|---|---|
| Russian | ru | | Japanese | ja |
| English | en | | Korean | ko |
| Chinese | zh | | German | de |
| French | fr | | Spanish | es |
| Italian | it | | Portuguese | pt |
| Turkish | tr | | Arabic | ar |
| Ukrainian | uk | | Polish | pl |
| Vietnamese | vi | | Dutch | nl |

---

## üê≥ Docker

```bash
docker-compose up --build
# –û—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ http://localhost:8847
```

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–∏–¥–µ–æ—Ñ–∞–π–ª–∞–º –≤ Docker —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ –º–µ–¥–∏–∞-–ø–∞–ø–∫–µ:

```bash
VIDEO_HOST_DIR=/path/to/your/media docker-compose up --build
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. [README_DOCKER.md](docs/README_DOCKER.md).

---

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
pip install -r requirements-dev.txt
pytest -q
```

–¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç:
- –ü–∞—Ä—Å–∏–Ω–≥ SRT (UTF-8, UTF-8 BOM, CP1251, edge cases)
- –ó–∞—â–∏—Ç—É/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ HTML- –∏ ASS-—Ç–µ–≥–æ–≤
- Retry-–ª–æ–≥–∏–∫—É HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
- Mock-–æ—Ç–≤–µ—Ç—ã Ollama (–Ω–µ-JSON, –æ—à–∏–±–∫–∏)
- –ü–∞–∫–µ—Ç–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ (`translate_batch`) —Å —á–∞–Ω–∫–∏–Ω–≥–æ–º
- Round-trip –¥–ª—è `write_srt`
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é `Translator` (–æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–æ–¥–µ–ª–∏)
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É–±—Ç–∏—Ç—Ä–æ–≤ –∏–∑ –≤–∏–¥–µ–æ (`video_utils`, mocked ffprobe/ffmpeg)

---

## üîé –ü—Ä–æ–≤–µ—Ä–∫–∞ Ollama API

–ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Ollama –∑–∞–ø—É—â–µ–Ω:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π
curl -sS http://localhost:11434/api/tags

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –∫ –º–æ–¥–µ–ª–∏
curl -sS http://localhost:11434/api/generate -d '{
  "model": "translategemma:4b",
  "prompt": "Translate to Russian: Hello world",
  "stream": false
}'
```

---

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **–ö–∞—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–≤–æ–¥–∞** –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–æ–¥–µ–ª–∏. `translategemma:4b` ‚Äî —Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–∞. –î–ª—è –ª—É—á—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ –∫—Ä—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏.
- **–î–ª–∏–Ω–Ω—ã–µ —Å—É–±—Ç–∏—Ç—Ä—ã** —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –Ω–∞ —á–∞–Ω–∫–∏; –ø—Ä–∏ –±–æ–ª—å—à–æ–º chunk_size –º–æ–¥–µ–ª—å –º–æ–∂–µ—Ç –¥–∞–≤–∞—Ç—å –Ω–µ–ø–æ–ª–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã.
- **–ü–∞–∫–µ—Ç–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å `|||SEP|||` –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Å–µ–≥–º–µ–Ω—Ç–æ–≤. –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ø–∞—Ä—Å–∏–Ω–≥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ –ø–æ—à—Ç—É—á–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥.
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å**: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3 –≤–æ—Ä–∫–µ—Ä–∞. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ `MAX_WORKERS` –ø–æ–≤—ã—à–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ Ollama.
- **–û–¥–Ω–∞ –º–æ–¥–µ–ª—å –Ω–∞ Ollama**: –µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–∞–∑–Ω—ã–µ –º–æ–¥–µ–ª–∏, Ollama –±—É–¥–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –Ω–∏–º–∏, —á—Ç–æ –∑–∞–º–µ–¥–ª—è–µ—Ç —Ä–∞–±–æ—Ç—É.
- **Temperature = 0** –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤. –£–≤–µ–ª–∏—á—å—Ç–µ –¥–ª—è –±–æ–ª–µ–µ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–æ–∫.
- **–ö–æ–¥–∏—Ä–æ–≤–∫–∏**: –∞–≤—Ç–æ–¥–µ—Ç–µ–∫—Ü–∏—è —á–µ—Ä–µ–∑ chardet + fallback-—Ü–µ–ø–æ—á–∫–∞ (UTF-8, CP1251, Latin-1, ISO-8859-2, Shift_JIS).
- **–í–∏–¥–µ–æ-—Å—É–±—Ç–∏—Ç—Ä—ã**: –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å—É–±—Ç–∏—Ç—Ä—ã (SRT, ASS, SSA, WebVTT). –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ (PGS, VobSub) –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è.

---

## üì¶ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
app.py              ‚Äî Flask –≤–µ–±-—Å–µ—Ä–≤–µ—Ä (UI + API)
translate_srt.py    ‚Äî –Ø–¥—Ä–æ: –ø–∞—Ä—Å–µ—Ä SRT, Translator, –ø–∞–∫–µ—Ç–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥
video_utils.py      ‚Äî –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É–±—Ç–∏—Ç—Ä–æ–≤ –∏–∑ –≤–∏–¥–µ–æ (ffmpeg/ffprobe)
templates/index.html ‚Äî –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (drag-and-drop, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
tests/              ‚Äî –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (pytest)
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- **Retry —Å backoff** –¥–ª—è –≤—Å–µ—Ö HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Ollama
- **UUID-–ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã** –¥–ª—è –∑–∞—â–∏—Ç—ã HTML/ASS-—Ç–µ–≥–æ–≤ –æ—Ç –ø–µ—Ä–µ–≤–æ–¥–∞
- **–ü–∞–∫–µ—Ç–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥** —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏ `|||SEP|||` –∏ fallback –Ω–∞ –ø–æ—à—Ç—É—á–Ω—ã–π
- **Sliding window** ‚Äî —Å–æ—Å–µ–¥–Ω–∏–µ —Å—É–±—Ç–∏—Ç—Ä—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —Å–≤—è–∑–Ω–æ—Å—Ç–∏
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—É—Å—Ç—ã—Ö, —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã—Ö, –Ω–µ–ø–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤ —Å retry
- **–ö—ç—à –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Ñ—Ä–∞–∑** ‚Äî –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ñ—Ä–∞–∑—ã –ø–µ—Ä–µ–≤–æ–¥—è—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
- **–î–≤—É—Ö–ø—Ä–æ—Ö–æ–¥–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥** ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π review-–ø—Ä–æ—Ö–æ–¥ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞
- **–ê–≤—Ç–æ—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π** ‚Äî UI –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –º–æ–¥–µ–ª–∏ –∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º (SSE)
- **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É–±—Ç–∏—Ç—Ä–æ–≤** –∏–∑ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ ffmpeg —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—ã–±–æ—Ä–∞ –¥–æ—Ä–æ–∂–∫–∏
- **ThreadPoolExecutor** –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á –ø–µ—Ä–µ–≤–æ–¥–∞
- **–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞** –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –∑–∞–¥–∞—á (TTL)
- **Graceful shutdown** —Å –æ–∂–∏–¥–∞–Ω–∏–µ–º —Ç–µ–∫—É—â–∏—Ö –∑–∞–¥–∞—á –ø—Ä–∏ SIGINT/SIGTERM
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è API-–∑–∞–ø—Ä–æ—Å–æ–≤, –æ—à–∏–±–æ–∫ –∏ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∑–∞–¥–∞—á

---

## üí° –°–æ–≤–µ—Ç—ã

- **–ö–æ–Ω—Ç–µ–∫—Å—Ç** –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ: —É–∫–∞–∂–∏—Ç–µ –∂–∞–Ω—Ä, —Ç–µ–º–∞—Ç–∏–∫—É –∏–ª–∏ –∏–º–µ–Ω–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- **Temperature 0** ‚Äî –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞, **0.3‚Äì0.5** ‚Äî –¥–ª—è —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
- **Chunk size** ‚â§ 2000 —Å–∏–º–≤–æ–ª–æ–≤ ‚Äî –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –º–æ–¥–µ–ª–µ–π
- **–î–≤—É—Ö–ø—Ä–æ—Ö–æ–¥–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥** —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –≤–∞–∂–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ ‚Äî –∑–∞–º–µ—Ç–Ω–æ —É–ª—É—á—à–∞–µ—Ç —Å–≤—è–∑–Ω–æ—Å—Ç—å
- **–ò—Å—Ö–æ–¥–Ω—ã–π —è–∑—ã–∫** ‚Äî —É–∫–∞–∂–∏—Ç–µ –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ (–∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —è–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –ª—É—á—à–µ)

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π [MIT](LICENSE).
