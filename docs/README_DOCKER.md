# üêã Docker Setup –¥–ª—è Subtitle Translator —Å Ollama + translategemma:4b

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **Windows x64** —Å Docker Desktop
- **16GB RAM** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è translategemma:4b)
- **~2.5GB** —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –¥–ª—è –º–æ–¥–µ–ª–∏
- **Docker Desktop** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
docker-compose up -d
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ:
- –°–∫–∞—á–∞–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Ollama
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –º–æ–¥–µ–ª—å translategemma:4b (~2.5GB)
- –ó–∞–ø—É—Å—Ç–∏—Ç—Å—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∞

**–í—Ä–µ–º—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:** 5-10 –º–∏–Ω—É—Ç (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏
docker logs model-init

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –õ–æ–≥–∏ –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∞
docker logs subtitle-translator -f
```

### 3. –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **http://localhost:8847**

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
docker-compose down
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
```bash
docker-compose restart
```

### –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö (–≤–∫–ª—é—á–∞—è –º–æ–¥–µ–ª—å)
```bash
docker-compose down -v
```

## üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

### –î–ª—è Windows x64 (Intel Core i3-6100T, 16GB RAM):
- **Ollama –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:** ~3-4GB RAM (–≤ —Ä–µ–∂–∏–º–µ –ø–µ—Ä–µ–≤–æ–¥–∞)
- **–ü–µ—Ä–µ–≤–æ–¥—á–∏–∫:** ~500MB RAM
- **–î–∏—Å–∫:** ~2.5GB –¥–ª—è –º–æ–¥–µ–ª–∏ + –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è Windows:
- –ú–æ–¥–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ CPU-—Ä–µ–∂–∏–º–µ (GPU –Ω–∞ Windows —Ç—Ä–µ–±—É–µ—Ç WSL2 + NVIDIA Toolkit)
- –°–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–≤–æ–¥–∞: ~2-5 —Å–µ–∫—É–Ω–¥ –Ω–∞ –±–ª–æ–∫ —Å—É–±—Ç–∏—Ç—Ä–æ–≤
- –î–ª—è —Ñ–∞–π–ª–∞ –Ω–∞ 500 –±–ª–æ–∫–æ–≤: ~15-30 –º–∏–Ω—É—Ç

## üîÑ –°–º–µ–Ω–∞ –º–æ–¥–µ–ª–∏

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥—É—é –≤–µ—Ä—Å–∏—é:

### translategemma:12b (—Ç—Ä–µ–±—É–µ—Ç ~24GB RAM):
–ò–∑–º–µ–Ω–∏—Ç–µ –≤ `init-model.sh`:
```bash
"name": "translategemma:12b"
```

### translategemma:27b (—Ç—Ä–µ–±—É–µ—Ç >32GB RAM):
```bash
"name": "translategemma:27b"
```

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```bash
docker-compose down -v
docker-compose up -d
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä model-init –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker logs model-init

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É –º–æ–¥–µ–ª–∏
docker-compose restart model-init
```

### Ollama –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
docker exec ollama ollama list

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Ollama
docker-compose restart ollama
```

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker Desktop –≤—ã–¥–µ–ª–µ–Ω–æ –º–∏–Ω–∏–º—É–º 8GB RAM
- Settings ‚Üí Resources ‚Üí Memory ‚Üí —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ 8GB+

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ docker-compose.yml    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker
‚îú‚îÄ‚îÄ Dockerfile           # –û–±—Ä–∞–∑ –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∞
‚îú‚îÄ‚îÄ init-model.sh       # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ app.py              # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ translate_srt.py    # CLI-–ø–µ—Ä–µ–≤–æ–¥—á–∏–∫
‚îî‚îÄ‚îÄ templates/          # HTML-—à–∞–±–ª–æ–Ω—ã
```

## üåê API Endpoints

- `GET /` - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `POST /translate` - –ó–∞–≥—Ä—É–∑–∫–∞ SRT –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞
- `GET /progress/<task_id>` - –°—Ç–∞—Ç—É—Å –ø–µ—Ä–µ–≤–æ–¥–∞
- `GET /download/<task_id>` - –°–∫–∞—á–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

## üí° –°–æ–≤–µ—Ç—ã

1. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫:** –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
2. **–§–æ–Ω–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞:** Ollama –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
3. **Batch-–æ–±—Ä–∞–±–æ—Ç–∫–∞:** –ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ –ø–æ–¥—Ä—è–¥
4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π:** –ú–æ–¥–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ Docker volume –∏ –Ω–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker Desktop –∑–∞–ø—É—â–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Ä—Ç–∞–º 8847 –∏ 11434
