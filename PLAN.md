# План работ — переводчик субтитров (проект)

## Цели
- Провести аудит проекта и внести первые улучшения для надёжности и качества перевода.

## Краткий план (шаги)
1. Добавить retry helper для вызовов Ollama (`post_with_retry`).
2. Защитить HTML / теги через UUID-плейсхолдеры (`protect_tags` / `restore_tags`).
3. Заменить фоновый запуск задач на `ThreadPoolExecutor` (лимит параллельных задач).
4. Ввести жёсткий JSON-контракт для запросов к модели (следующий этап).
5. Реализовать chunking (объединение блоков) и sliding-window (после проверки базовых правок).
6. Добавить очистку временных файлов и TTL для `tasks`.
7. Написать тесты для `parse_srt`, mock-ответов Ollama и сценариев ошибок.

## Сейчас: внедрены пункты 1–3 (минимальные патчи). Дальше: chunking и UI.
